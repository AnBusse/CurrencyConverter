version: '3'
services:
    php-cli:
        image: php:7.2-cli
        links:
           - mariadb
        volumes:
           - ./:/var/www/html:rw
           - .docker/config/php-cli/zz-custom.ini:/usr/local/etc/php/conf.d/zz-custom.ini
           - ~/.ssh:/home/netvlies/.ssh

    nginx:
        image: nginx:1.11.4
        volumes:
           - ./:/var/www/html:rw
           - .docker/config/nginx:/etc/nginx
        depends_on:
           - php-fpm
        ports:
           - 80:80
        environment:
           - VIRTUAL_HOST=localhost

    php-fpm:
        image: php:7.2-fpm
        volumes:
           - ./:/var/www/html:rw
           - .docker/config/php-fpm/zz-custom.ini:/usr/local/etc/php/conf.d/zz-custom.ini
        links:
           - mariadb

    mariadb:
        image: mariadb:latest
        ports:
           - 3306:3306
        environment:
             MYSQL_ROOT_PASSWORD: root
             MYSQL_USER: root
             MYSQL_PASSWORD: root
             MYSQL_DATABASE: currencyConverter
        volumes:
           - ./.docker/data/mariadb/:/var/lib/mysql:rw
